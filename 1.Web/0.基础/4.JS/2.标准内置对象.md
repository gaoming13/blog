## JavaScript 标准内置对象、以及它们它们的方法和属性
- 这里的 标准内置对象 不应与 全局对象(Global Object) 混淆
- 全局对象的属性 = 标准内置对象 + 用户脚本创建的 + 宿主程序提供的
  - 浏览器中: window / self / frames 是全局对象
  - Node.js 中: global 是全局对象
  - Web Workers 中: self 是全局变量
  - 在松散模式下，可以在函数中返回 this 来获取全局变量，但严格模式下和模块环境下，this 会返回 undefined
  - globalThis 提供了一个标准的方式来获取不同环境下的全局 this 对象（也就是全局对象自身）

## 标准内置对象分类
> https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN
- 函数
  - eval
  - isFinite
  - isNaN
  - parseFloat
  - parseInt
  - decodeURI
  - decodeURIComponent
  - encodeURI
  - encodeURIComponent
- 对象:基本
  - Object
  - Function
  - Boolean
  - Symbol
- 对象:错误
  - Error
  - AggregateError
  - EvalError
  - InternalError
  - RangeError
  - ReferenceError
  - SyntaxError
  - TypeError
  - URIError
- 对象:数字和日期
  - Number
  - BigInt
  - Math
  - Date
- 对象:字符串
  - String
  - RegExp
- 对象:数组
  - Array
  - Int8Array
  - Uint8Array
  - Uint8ClampedArray
  - Int16Array
  - Uint16Array
  - Int32Array
  - Uint32Array
  - Float32Array
  - Float64Array
  - BigInt64Array
  - BigUint64Array
- 对象:集合
  - Map
  - Set
  - WeakMap
  - WeakSet
- 对象:结构化
  - ArrayBuffer
  - SharedArrayBuffer
  - Atomics
  - DataView
  - JSON
- 对象:控制抽象
  - Promise
  - Generator
  - GeneratorFunction
  - AsyncFunction
- 对象:反射
  - Reflect
  - Proxy
- 对象:国际化
  - Intl
  - Intl.Collator
  - Intl.DateTimeFormat
  - Intl.ListFormat
  - Intl.NumberFormat
  - Intl.PluralRules
  - Intl.RelativeTimeFormat
  - Intl.Locale
- 对象:WebAssembly
  - WebAssembly
  - WebAssembly.Module
  - WebAssembly.Instance
  - WebAssembly.Memory
  - WebAssembly.Table
  - WebAssembly.CompileError
  - WebAssembly.LinkError (en-US)
  - WebAssembly.RuntimeError

### eval
- 第三方代码可以看到 eval() 被调用时的作用域，可能导致不同方式的攻击
```js
// 慢，浏览器需要全局查询 Date 变量
// 立刻执行
eval('console.log(Date.now())');
// 只需查询全局和函数体内的变量
// 返回的是函数,调用后才开始执行
(Function('console.log(Date.now())'))();
```

### isFinite
- 是否为有限数值
```js
isFinite(Infinity); // false
isFinite(NaN); // false
isFinite(2e64); // true
// 会自动转化
isFinite(null); // true
Number.isFinite(null); // false 可靠检测
```

### isNaN
- 是否为 NaN
- 怪异行为：如果 isNaN 函数的参数不是 Number 类型，isNaN 函数会首先尝试将这个参数转换为数值，再判断
```js
isNaN('hello'); // true
Number.isNaN('hello'); // false 可靠检测
// isNaN 的polyfill 可理解为
var isNaN = function (value) {
  var n = Number(value);
  return n !== n;
}
// 怪异行为的利用
function add(x) {
  if (isNaN(x)) x = 0;
  return x + 1;
}
function add(x) {
  if (Number.isNaN(Number(x))) x = 0;
  return x + 1;
}
```

### parseFloat
- 解析成浮点数

### parseInt
- 解析成整数,向下取整(floor)
```js
parseInt('0xF'); // 15
parseInt('F', 16); // 15
parseInt('015', 10); // 10
parseInt('435', 2); // NaN
// 严格解析函数
function filterInt (value) {
  return (/^(\-|\+)?([0-9]+|Infinity)$/.test(value)) ? Number(value) : NaN;
}
```

### decodeURI
- 包含无效字符序列，会引发 URIError 异常

### decodeURIComponent
- 包含无效字符序列，会引发 URIError 异常

### encodeURI
- 不转义的字符 `[A-Za-z0-9-_.!~*'()]#;,/?:@&=+$`
- 其余 UTF-8 转义
```js
encodeURI('http://example.com/?s=王');
// http://example.com/?s=%E7%8E%8B
```

### encodeURIComponent
- 不转义的字符 `[A-Za-z0-9-_.!~*'()]`
- 其余 UTF-8 转义
```js
encodeURIComponent('http://example.com/?s=王');
// http%3A%2F%2Fexample.com%2F%3Fs%3D%E7%8E%8B
```

### Object
- 构造函数：为给定值创建一个对象包装器
- 以非构造函数形式调用时，Object 的行为等同于 new Object()
```js
// 等价于 o = new Boolean(true);
let o = new Object(true);
```
- Object构造函数的方法
  - 1. Object.assign 通过复制一个或多个对象来创建一个新对象
  - 2. Object.create 指定原型对象和属性创建一个新对象
  - 3. Object.defineProperty 给对象添加一个属性
  - 4. Object.defineProperties 给对象添加多个属性
    ```js
    const obj = {
      p1: 1,
      get p2() { return this.p1 + 1; },
      set p3(x) { this.p1 = x * 2 },
    };
    Object.defineProperty(obj, 'p4', {
      get: function() { return this.p1; },
      set: function(x) { this.p1 = x + 1 },
    });
    Object.defineProperties(obj, {
      'p5': { get: function() { return 3; } },
      'p6': { get: function() { return 4; } },
    });
    ```
  - 5. Object.entries (自身可枚举)
  - 6. Object.freeze 冻结对象，其它代码不能删除或更改任何属性
  - 7. Object.getOwnPropertyDescriptor (自身可枚举 + 自身不可枚举)
  - 8. Object.getOwnPropertyNames (自身可枚举 + 自身不可枚举)
  - 9. Object.getOwnPropertySymbols (自身可枚举 + 自身不可枚举)
  - 10. Object.getPrototypeOf 返回指定对象的原型对象
  - 11. Object.is 比较两个值是否相同，所有NaN值都相等(与 == 和 === 不同)
  - 12. Object.isExtensible 判断对象是否可扩展
  - 13. Object.isFrozen 判断对象是否已经冻结
  - 14. Object.isSealed 判断对象是否已经密封
  - 15. Object.keys (自身可枚举)(数组的key会变成字符串)
  - 16. Object.preventExtensions 防止对象的任何扩展
  - 17. Object.seal 防止其它代码删除对象的属性
  - 18. Object.setPrototypeOf 设置对象的原型
  - 19. Object.values 返回一个数组，包含自身可枚举的值
- Object实例 和 Object原型对象
  - Object.prototype.hasOwnProperty 返回一个布尔值，表示对象自身是否含有指定属性
  - Object.prototype.isPrototypeof 返回一个布尔值，表示对象是否在原型链中
  - Object.prototype.toString
  - Object.prototype.valueOf 返回指定对象的原始值
- 遍历属性 - 参见：img/遍历属性函数
  ```js
  const obj = ['a', 'b']; obj.p1 = 1; obj[Symbol('s1')] = 1;
  Object.prototype.p2 = 2; Object.prototype[Symbol('s2')] = 2;
  ```
  // 遍历次序规则：
  // 1.首先遍历所有数值键，按照数值升序排列。
  // 2.其次遍历所有字符串键，按照加入时间升序排列。
  // 3.最后遍历所有 Symbol 键，按照加入时间升序排列。
- 判断属性是否存在
  1. obj.hasOwnProperty (自身)
  2. 'a' in obj (自身+原型链 && 仅可枚举)
- 删除属性
  1. delete obj.a

### Function

### Boolean


### Symbol

### Error
### AggregateError
### EvalError
### InternalError
### RangeError
### ReferenceError
### SyntaxError
### TypeError
### URIError

### Number
### BigInt
### Math
### Date
- `Date.parse('2021-04-09T00:00:00.888')` 返回时间戳: 2021-04-09 00:00:00`
- `Date.UTC(2021, 3, 9, 0, 0, 0, 888)` 返回时间戳: 2021-04-09 08:00:00
- `Date.now()` 返回当前时间戳
- `const d1 = new Date(2021, 3, 9, 0, 0, 0, 888)` 2021-04-09 00:00:00
- `Date.prototype.toString()` 返回日期的字符串表示
- `Date.prototype.valueOf()` 返回日期的时间戳
- `Date.prototype.toISOString()` 返回 2021-04-09T07:02:39.355Z
- `Date.prototype.getTimezoneOffset()` 分钟计的UTC与本地时间的偏移量 -480

### String
- `s.length` 属性
- `String.fromCharCode(int)` ES5提供 String.fromCharCode() 无法正确识别码点大于 0xFFFF 的字符
- `String.fromCodePoint(int)` ES6的这个可以:Unicode码点->对应字符
- `String.raw`\u00A9` 还原模版字符串的处理方法
- `String.prototype.length` 按照16位,2B编码,大于2B,长度2
- `String.prototype.charAt(index)` 字符串指定索引(`0~length-1`)处的字符
- `String.prototype.charCodeAt(index)` 字符串指定索引(`0~length-1`)处的UTF-16编码单元体现的数字，范围 `0~65536`，`0x0000~0xffff`
- `String.prototype.codePointAt(index)` 字符串指定索引(`0~length-1`)处的编码单元体现的数字
- `String.prototype.indexOf(str)` `lastIndexOf(str)` 指定子串开始/结束的位置
- `String.prototype.concat(str)` 字符串拼接
- `String.prototype.split(str)` 字符串分割成数组
- `String.prototype.slice(beginIndex, endIndex)` 返回字符串切割的一部分(支持负值)
- `String.prototype.substring(indexStart, indexEnd)`
- `String.prototype.substr(indexStart, length)`
- `String.prototype.match` `replace` `search`
- `String.prototype.normalize(form)` 按照指定一种 Unicode 正规形式将字符串正规化
- `String.prototype.toUpperCase()` `toLowerCase()`
- `String.prototype.repeat(count)` 重复指定次数
- `String.prototype.trim()` 去除开头结尾的空白字符
- `String.prototype.includes()` 字符串搜索方法, 都支持第二个参数(开始搜索的位置)
- `String.prototype.startsWith()` 字符串搜索方法, 都支持第二个参数(开始搜索的位置)
- `String.prototype.endsWith()` 字符串搜索方法, 都支持第二个参数(开始搜索的位置)
- 新增了几个专门处理4字节码点的函数
  - `String.fromCodePoint()` Unicode码点->对应字符
  - `String.prototype.codePointAt()` 字符->对应的码点

### RegExp
- 1.RegExp构造函数,第一个参数是正则对象,第二个参数也可以指定修饰符(es5不支持)
  - `new RegExp(/abc/ig, 'i')`
- 2.字符串的正则方法(match、replace、search、split)
  - ES6将这四个方法,在语言内全部调用 RegExp 的实例方法,做到与正则相关的方法,都定义在RegExp对象上
  - String.prototype.math 调用 RegExp.prototype[Symbol.match]
  - String.prototype.replace 调用 RegExp.prototype[Symbol.replace]
  - String.prototype.search 调用 RegExp.prototype[Symbol.search]
  - String.prototype.split 调用 RegExp.prototype[Symbol.split]
  ```js
  'abc'.replace({
    [Symbol.replace](searchVal, replaceVal) {
      return searchVal.replace('ab', replaceVal);
    }
  }, 'k'); // kc
  ```
- 3.修饰符
  - u修饰符：用来处理大于 \uFFFF 的Unicode 字符 `/\u{20BB7}/u.test('𠮷')`
    - RegExp.prototype.unicode: 表示是否设置了u修饰符
  - y修饰符
    - RegExp.prototype.sticky: 是否设置了y修饰符
  - s修饰符：dotAll模式
  - RegExp.prototype.flags: 返回正则表达式的修饰符


> https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions
- RegExp 的 exec 和 test 方法, 以及 String 的 match、matchAll、replace、search 和 split

### 定义
- 1.`var re = /ab+c/i;`
- 2.`var re = new RegExp('ab+c', 'i')`;
- 3.`var re = new RegExp(/ab+c/', 'i')`; // es6

### 修饰符
- u修饰符,对正则表达式添加4字节码点的支持 // es6
- y修饰符 // es6
- s修饰符 // es6

### 匹配字符
- `\`
  - 1.`\特殊字符` 表示转义,下一个字符应该按字面理解;
    - `string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")` // $&表示整个被匹配的字符串
  - 2.`\非特殊字符` 不能按字面理解
- `^` 匹配输入的开始位置.
	- 如果多行标志被设置为 true, 那么也匹配换行符后紧跟的位置 Demo `/^abc/`
- `$` 匹配输入的结束位置.
	- 如果多行标志被设置为 true, 那么也匹配换行符前的位置 Demo `/abc$/`
- `*` 匹配前一个表达式0～n次. 等价于 `{0,}` Demo `/ab*c/`
- `+` 匹配前一个表达式1～n次. 等价于 `{1,}` Demo: `/(ab)+c/.test('ababc')`
- `?` 匹配前一个表达式0或1次. 等价于 `{0,1}` Demo: `/(ab)?c/.test('abc')`
	- 若紧跟在任何量词 `*、+、?、{}` 后面，将会使量词变为非贪婪(匹配尽量少的字符), 和缺省使用的贪婪模式相反
- `.` 匹配除换行符之外的任何单个字符串
	- 如果 `s(dotAll)` 标志位被设为 true, 它也会匹配换行符
- `(x)` 匹配 x 并记住匹配项. 其中括号称为捕获括号.
	- `/(lo|ld)/.exec('Hello World!')` 匹配一个
	- `[...'Hello World!'.match(/(lo|ld)/g)]` 匹配一个
	- `[...'Hello World!'.matchAll(/(lo|ld)/g)]` 匹配所有
	- `'Hello World!'.replace(/(lo|ld)/g, '-$1')` 替换所有
- `(?:x)` 匹配 x 但是不记住匹配项. 这种括号称为非捕获括号.
- `x(?=y)` 先行断言. 匹配x,仅当x后面是y Demo: `/Hello(?= World)/i.test('hello world')`
- `(?<=y)x` 后行断言. 匹配x,仅当x前面是y
- `x(?!y)` 正向否定查找. 仅当x后面不紧跟y时匹配x
- `(?<!y)x` 反向否定查找. 仅当x前面不是y时匹配x
- `x|y` 匹配x或y
- `{n}` `{n,}` `{n,m}` 匹配前一个字符n～m次
- `[xyz]` 匹配方括号中的任意字符，包括转义序列.
	- 可以使用破折号 `-` 来指定一个字符范围
	- 对于 `.、*` 这样的特殊符号无需转义
- `[^xyz]` 匹配任何没有包含在方括号中的字符
- `[\b]` 匹配一个退格(U+0008)
- `\b` 匹配一个词的边界. 一个词的边界就是一个词不被另一个字符跟随的位置 `/hello\b/i.exec('Hello world')`
- `\B` 匹配一个非单词边界. `/hell\B/i.exec('Hello world')`
- `\cX` 当X是处于A到Z之间的字符的时候, 匹配字符串中的一个控制符 EG: `/\cM/ 匹配 contrl-M(U+000D)`
- `\d` 匹配一个数字字符. 等价于 [0-9]
- `\D` 匹配一个非数字字符. 等价于 [^0-9]
- `\f` 匹配一个换页符(U+000C)
- `\n` 匹配一个换行符(U+000A)
- `\r` 匹配一个回车符(U+000D)
- `\s` 匹配一个空白字符(包含 空格、制表符、换页符、换行符)
- `\S` 匹配一个非空白字符
- `\t` 匹配一个水平制表符(U+0009)
- `\v` 匹配一个垂直制表符(U+000B)
- `\w` 匹配一个单字字符(字母、数字、下划线). 等价于 `[A-Za-z0-9_]`
- `\W` 匹配一个非单字字符. 等价于 `[A-Za-z0-9_]`
- `\n` ???
- `\0` 匹配 NULL(U+0000) 字符, 不要在这后面跟其它小数, 因为 `\0<digits>` 是一个八进制转义序列
- `\xhh` 匹配一个两位十六进制数 (\x00-\xFF) 表示的字符
- `\uhhhh` 匹配一个四位十六进制数表示的 UTF-16 代码单元
- `\u{hhhh} 或 \u{hhhhh}` 匹配一个十六进制数表示的 Unicode字符

### Array
### Int8Array
### Uint8Array
### Uint8ClampedArray
### Int16Array
### Uint16Array
### Int32Array
### Uint32Array
### Float32Array
### Float64Array
### BigInt64Array
### BigUint64Array

### Map
### Set
### WeakMap
### WeakSet

### ArrayBuffer
### SharedArrayBuffer
### Atomics
### DataView
### JSON

### Promise
### Generator
### GeneratorFunction
### AsyncFunction

### Reflect
### Proxy

### 对象:国际化
Intl
Intl.Collator
Intl.DateTimeFormat
Intl.ListFormat
Intl.NumberFormat
Intl.PluralRules
Intl.RelativeTimeFormat
Intl.Locale

### 对象:WebAssembly
WebAssembly
WebAssembly.Module
WebAssembly.Instance
WebAssembly.Memory
WebAssembly.Table
WebAssembly.CompileError
WebAssembly.LinkError (en-US)
WebAssembly.RuntimeError