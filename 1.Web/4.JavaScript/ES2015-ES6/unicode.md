#### es5字符函数的局限
- Javascript内部存储用的是UCS-2(后来的utf16)
- 由于Javascript只能处理UCS-2编码,如果是4个字节的字符,会当成2个双字节的字符处理
- 字符函数都受到这一点的影响，无法返回正确结果
  - `'𠮷'.length // 2`


### ES6的改进

#### 1.自动识别4字节字符
- for (let s of '嗨😄') {  }
- 未保持兼容,length属性还是原来的行为方式. 为得到字符串的正确长度, 可以使用 `Array.from('嗨😄').length`

#### 2.码点表示法
- es5允许采用 \uxxxx 形式表示一个字符, xxxx 表示字符的 Unicode 码点 `'\u6211' === '我`
- 但这种表示方法对4字节的码点无效,es6修复了该问题,只要将码点放在大括号中,就能正确识别
  - `'\u{20bb7}' === '\uD842\uDFB7' === '𠮷'`
  - !!! 这个是不普通的`吉`

#### 3.新增了几个专门处理4字节码点的函数
- String.fromCodePoint()：Unicode码点->对应字符
- String.prototype.codePointAt()：字符->对应的码点

#### 4.正则表达式
- ES6提供了u修饰符，对正则表达式添加4字节码点的支持
- `/^.$/.test('😁') // false`
- `/^.$/u.test('😁') // false`
