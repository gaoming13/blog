### 常用命令
- 查看线程
  - `show processlist` 查看哪些线程在运行（最多100条）
    - id 系统分配的connection_id，可以通过 connection_id() 查看
    - command 当前连接执行的命令(休眠sleep / 查询query / 连接connect)
  - `show full processlist` 查看哪些线程在运行（全部）
- 查看注释
  - `show create table user1` 查看注释
  - `show full columns from user1` 参看注释
- 数据库引擎
  - `show engines;` 查看支持的数据库引擎
  - `show create table user1` 查看表的数据库引擎
  - `alter table w2011_post engine=MyISAM` 修改表的存储引擎
  - myisam和innodb 单列索引长度限制分别为 1000 bytes 和 767 bytes

### 概念
> https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651961494&idx=1&sn=34f1874c1e36c2bc8ab9f74af6546ec5&chksm=bd2d0d4a8a5a845c566006efce0831e610604a43279aab03e0a6dde9422b63944e908fcc6c05
- 虽然哈希索引是O(1),树索引是O(log(n)),但SQL有很多`有序`需求,故数据库使用树形索引
- InnoDB不支持哈希索引
- 磁盘预读：磁盘读写并不是`按需读取`,而是`按页读取`,一次读取一页的数据(4k)
  - 如果未来要读取的数据在这一页中,可以避免未来的磁盘IO,提高效率
  - 局部性原理：软件设计要尽量遵循`数据读取集中`与`使用到的一个数据,大概率会使用其附近的数据`,这样磁盘预读才能充分提交磁盘IO
- 数据库的索引最常用B+树
  - 1.适合磁盘存储,充分利用局部性原理,磁盘预读
  - 2.很低的树高度,索引本身占用的内存很少,能够存储大量的数据
  - 3.能够很好的支持`单点查询`,`范围查询`,`有序性查询`
- 数据库索引分为`主键索引(Primary Index)`和`普通索引(Secondary Index)`
- `MyISAM`
  - `索引`与`行记录`是分开存储的,叫做`非聚集索引(UnClustered Index)`
  - 其`主键`与`普通索引`没有本质差异
    - 1.有连续聚集的区域`单独存储行记录`
    - 2.主键索引的叶子节点,存储`主键`+`对应含记录的指针`
    - 3.普通索引的叶子节点,存储`索引列`+`对应含记录的指针`
    - 4.MyISAM的表可以没有主键
  - `主键索引`和`普通索引`是两颗独立的索引B+树,通过索引列查找叶子节点,再通过指针定位到行记录
- `InnoDB`
  - `主键索引`和`行记录`是存储在一起的,叫`聚集索引(Clustered Index)`
    - 没有独立的区域存储行记录
    - 主键索引的叶子节点,存储`主键`+`对应行的记录(不是指针)`
    - PK查询是非常快的
  - 必须要有聚集索引
    - 1.如果表定义了PK,则PK就是聚集索引
    - 2.否则,第一个非空的unique列就是聚集索引
    - 3.否则,创建一个隐藏的row-id作为聚集索引
  - 普通索引的叶子节点,存储`索引列`+`主键(而不是指针)`
    - 建议使用`趋势递增整数作为PK`,不宜使用`较长的列作为PK`