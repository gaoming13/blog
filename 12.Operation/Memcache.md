> https://mp.weixin.qq.com/s/HXSAiZoSVHcE3ym8M8p-Xg
### 什么时候倾向于选择 redis
- 1.需要支持复杂的数据结构
- 2.需要持久化(挂了之后能快速恢复热数据，不会瞬时将压力压倒数据库上)
- 3.需要天然高可用(天然支持集群功能)
- 4.存储的内容非常大(memcache的value存储，最大为1M)

### 什么时候倾向于 memcache
- 1.内存分配机制差异
  - memcache 使用预分配内存池的方式管理内存，能省去内存分配时间
  - redis 则是临时申请空间，可能导致碎片
- 2.虚拟内存使用有差异
  - memcache 所有数据存在物理内存中
  - redis 有自己的 VM 机制，能够存储比物理内存更多的数据
- 3.网络模型有差异
  - memcache / redis 都是 非阻塞 IO 复用模型
  - 但 redis 提供了一些排序、聚合功能，复杂的 CPU 计算，会阻塞整个 IO 调度
- 4.线程模型有差异
  - memcache 使用多线程，主线程监听，子线程接受请求，执行读写，这个过程中，可能存在锁冲突
  - redis 使用单线程，难以利用多核的特性提升整体吞吐量