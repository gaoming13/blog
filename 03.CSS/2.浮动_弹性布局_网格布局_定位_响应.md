### 浮动
- 浮动设计初衷: 并不是为了用于页面布局,而是为了实现文字围绕浮动元素排列的效果
- 浮动元素的高度不会加到父元素上,是由于设计初衷:
  - 如果图片比段落文字高,下一段会直接从上一段的文字下面开始
  - 两段文字都会围绕浮动的图片排列
- 清除浮动的方法
  1. 使用跟浮动配套的 clear 属性, 在浮动元素后面添加 `<div style="clear:both"></div>`
    - clear: left 让该元素移动到浮动元素的下面,而不是侧面
    ```html
    <div>
      <div style="float:left;margin-top:20px;">列1</div>
      <div style="margin-top: 20px;">列2</div>
      <div style="clear:both;"></div>
    </div>
    ```
  2. clear 优化
    ```html
    <style>
      .clearfix::after { display: block; content: ' '; clear: both; }
    </style>
    <div class="clearfix">
      <div style="float:left;margin-top:20px;">列1</div>
      <div style="margin-top: 20px;">列2</div>
    </div>
    ```
  3. 示例2存在一个问题,浮动元素<列1>外边距不会折叠,而正常元素<列2>外边距会正常折叠
    - 有些开发人员喜欢用清除浮动的修改版,让<列2>外边距也不折叠,这样更符合预期
    ```html
    <style>
      .clearfix::before { display: table; content: ' '; }
      .clearfix::after { display: block; content: ' '; clear: both; }
      /* 简写
      .clearfix::before, .clearfix::after { display: table; content: ' '; }
      .clearfix::after { clear: both; } */
    </style>
    <div class="clearfix">
      <div style="float:left;margin-top:20px;">列1</div>
      <div style="margin-top: 20px;">列2</div>
    </div>
    ```
- 浮动陷阱
  - 三个左浮动的盒子,如果盒子1和盒子2高,则盒子3不会浮动到最左侧,而是浮动到盒子1的右边
  - 因为浏览器会将浮动元素尽可能地放在靠上的地方
  - 这种行为本质上取决于每个浮动块的高度,即使高度相差 1px,也会导致这个问题
  - 修复这个问题的方法:清除第三个浮动元素上面的浮动 clear:left
    - .盒子2 { clear: left; }
- BFC(块级格式化上下文)(block formatting context)
  - 虽然 BFC 本身是环绕文档流的一部分,但它将内部的内容和外部的上下文隔离开
    1. 包含了内部所有元素的上下外边距,它们不会跟 BFC 外面的元素产生外边距折叠
    2. 包含了内部所有浮动元素
    3. 不会跟 BFC 外面的浮动元素重叠
  - 简而言之,BFC里的内容不会跟外部元素重叠或相互影响
  - 给元素添加以下任意属性都会创建 BFC
    - float: left / right;
    - overflow: hidden / auto / scroll;
    - display: 块级容器
      - inline-block / table-cell / table-caption
      - flex / inline-flex / grid / inline-grid
    - position: abosolute / fixed;
  - 网页的根元素也创建了一个顶级的 BFC
  - 使用 overflow: auto; 通常是最简单的一种方式
    - 使用浮动或者inline-block 元素宽度会变成 100%, 需要限制下元素的宽度
    - 防止因为过宽而换行到下面
