> https://muyiy.cn/blog/5/5.1.html
### æ„é€ å‡½æ•°(function) / å®ä¾‹å¯¹è±¡(object)
- å®šä¹‰ï¼š
  - æ„é€ å‡½æ•°æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä¸è¿‡ä¸ºäº†è§„èŒƒä¸€èˆ¬å°†å…¶é¦–å­—æ¯å¤§å†™
  - ä½¿ç”¨ new ç”Ÿæˆå®ä¾‹çš„å‡½æ•°å°±æ˜¯æ„é€ å‡½æ•°ï¼Œç›´æ¥è°ƒç”¨çš„å°±æ˜¯æ™®é€šå‡½æ•°
- Symbol ä¸æ˜¯æ„é€ å‡½æ•°
  - å› ä¸ºå®ƒä¸æ”¯æŒ new Symbol()ï¼Œå¦‚æœè¦ç”Ÿæˆå®ä¾‹ç›´æ¥æ‰€ä½¿ç”¨ Symbol() å³å¯
  - è™½ç„¶æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½† Symbol(123) å®ä¾‹å¯ä»¥è·å– constructor å±æ€§å€¼ï¼Œå³ Symbol.prototype.constructor
- constructor å€¼åªè¯»å—
  - å¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´ï¼Œconstructor æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†å¯¹äºåŸºæœ¬ç±»å‹æ¥è¯´æ˜¯åªè¯»çš„
  - null / undefined æ²¡æœ‰ constructor å±æ€§ï¼Œå› ä¸ºåˆ›å»ºä»–ä»¬çš„æ˜¯åªè¯»çš„åŸç”Ÿæ„é€ å‡½æ•°(native constructor)
- æ¨¡æ‹Ÿå®ç° new
  - new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ª ç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹ æˆ– å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹
  - new åˆ›å»ºçš„å®ä¾‹ a æœ‰ä»¥ä¸‹2ä¸ªç‰¹æ€§ï¼šå…·æœ‰æ„é€ å‡½æ•° A é‡Œçš„å±æ€§ï¼›a.__proto__ç»§æ‰¿ A.prototype é‡Œçš„å±æ€§
  - const a = new A('red'); å‘ç”Ÿä»¥ä¸‹äº‹æƒ…ï¼š
    - 1. ä¸€ä¸ªç»§æ‰¿è‡ª A.prototype çš„æ–°å¯¹è±¡è¢«åˆ›å»ºï¼šlet a = new Object(); a.__proto__ = A.ptototype;
      - ä¼˜åŒ–1ï¼šlet a = new Object(); Object.setPrototypeOf(a, A.prototype);
      - ä¼˜åŒ–2ï¼šlet a = Object.create(A.prototype);
    - 2. ä½¿ç”¨æŒ‡å®šçš„å‚æ•°è°ƒç”¨æ„é€ å‡½æ•° Aï¼Œå¹¶å°† this ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ï¼šA.apply(a, ['red'])
    - 3. ç”±æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯ new è¡¨è¾¾å¼çš„ç»“æœï¼›è‹¥æ²¡æœ‰æ˜¾å¼è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨1åˆ›å»ºçš„å¯¹è±¡
  - ä¼˜åŒ–ï¼šconst res = A.apply(a, ['red']); res instanceof Object ?
  - é¢˜ç›®ï¼šå®ç° add(1)(2)(3)(4)

### åŸå‹å¯¹è±¡(object)
- __proto__ å±æ€§åœ¨ ES6 æ—¶æ‰è¢«æ ‡å‡†åŒ–ï¼Œä»¥ç¡®ä¿ Web æµè§ˆå™¨å…¼å®¹æ€§ï¼Œä½†ä¸æ¨èä½¿ç”¨ï¼Œé™¤äº†æ ‡å‡†åŒ–çš„åŸå› ä¹‹å¤–è¿˜æœ‰æ€§èƒ½é—®é¢˜
  - ä¸ºäº†æ›´å¥½çš„æ”¯æŒï¼Œæ¨èä½¿ç”¨ Object.getPrototypeof() / Object.setPrototypeof()
- å¦‚æœè¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶ç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡çš„ __proto__ï¼Œæ¨èä½¿ç”¨ Object.create()
- å±æ€§é®è”½(shadow)
  - åªè¦ç»™å¯¹è±¡å®ä¾‹æ·»åŠ ä¸€ä¸ªå±æ€§,è¿™ä¸ªå±æ€§å°±ä¼šé®è”½(shadow)åŸå‹å¯¹è±¡ä¸Šçš„åŒåå±æ€§;ä¹Ÿå°±æ˜¯è™½ç„¶ä¸ä¼šä¿®æ”¹å®ƒ,ä½†ä¼šå±è”½å¯¹å®ƒçš„è®¿é—®
  - å³ä½¿åœ¨å®ä¾‹ä¸ŠæŠŠè¿™ä¸ªå±æ€§è®¾ç½®ä¸ºnull,ä¹Ÿä¸ä¼šæ¢å¤å®ƒå’ŒåŸå‹çš„è”ç³»
  - ä½¿ç”¨ delete æ“ä½œç¬¦å¯ä»¥å®Œå…¨åˆ é™¤å®ä¾‹ä¸Šçš„è¿™ä¸ªå±æ€§,ä»è€Œè®©æ ‡è¯†ç¬¦è§£æè¿‡ç¨‹èƒ½å¤Ÿæœç´¢åˆ°åŸå‹å¯¹è±¡
  ```js
  function F() {}
  F.prototype.a = 123;
  let f1 = new F();
  f1.a; // 123
  f1.hasOwnProperty('a'); // false
  f1.a = 456;
  f1.a; // 456
  f1.hasOwnProperty('a'); // true
  delete f1.a;
  f1.a; // 123
  f1.hasOwnProperty('a'); // false
  ```
- prototypeçš„ä½œç”¨
  - 1.èŠ‚çº¦å†…å­˜
  - 2.æ‹“å±•å±æ€§å’Œæ–¹æ³•
  - 3.å¯å®ç°ç±»çš„ç»§æ‰¿

### åŸå‹é“¾
- åŸå‹é“¾å®šä¹‰ï¼šæ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œé€šè¿‡ __proto__ æŒ‡é’ˆæŒ‡å‘ä¸Šä¸€ä¸ªåŸå‹ï¼Œå¹¶ä»ä¸­ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ã€‚
  - åŒæ—¶åŸå‹å¯¹è±¡ä¹Ÿå¯èƒ½æ‹¥æœ‰åŸå‹ï¼Œè¿™æ ·ä¸€å±‚ä¸€å±‚ï¼Œæœ€ç»ˆæŒ‡å‘ nullï¼Œè¿™å°±æ˜¯åŸå‹é“¾ã€‚
- åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹é“¾çš„å¯¹è±¡ `Object.create(null, {})`
  - æ—¢ç„¶ null æ˜¯ä¸‡ç‰©çš„ç»ˆç‚¹ï¼Œé‚£ä½¿ç”¨ Object.create(null) åˆ›å»ºçš„å¯¹è±¡æ˜¯æ²¡æœ‰ __proto__ å±æ€§ å’Œ prototype å±æ€§
- åŸå‹é“¾ç¤ºä¾‹ï¼š
  1. const arr = new Array(); `arr -> Array.prototype -> Object.prototype -> null`
  2. function f() {} `f -> Function.prototype -> Object.prototype -> null`
  3. const s = '123'; `s -> String.prototype -> Object.prototype -> null`

### instanceof åŸç†åŠå®ç°
- åŸç†ï¼šinstanceof å°±æ˜¯ä¸€å±‚å±‚æŸ¥æ‰¾ __proto__ï¼Œå¦‚æœ å’Œ å³ä¾§çš„æ„é€ å‡½æ•°.prototype ç›¸ç­‰åˆ™è¿”å›true, è‹¥ä¸€ç›´æ²¡æ‰¾åˆ°åˆ™è¿”å›false
- æ¨¡æ‹Ÿå®ç° instanceof
  ```js
  function instanceOf(L, R) {
    let point = L;
    while (point.__proto__) {
      if (point.__proto__ === R.prototype) return true;
      point = point.__proto__;
    }
    return false;
  }
  ```

### 3ç§åˆ¤æ–­æ•°ç»„çš„æ–¹æ³•ï¼Œä»‹ç»åŒºåˆ«ä¸ä¼˜åŠ£
- 0. typeof æ— æ³•åˆ¤å®š
- 1. Object.prototype.toString.call(arr)
  - å„ç§ç±»å‹
- 2. arr instanceof Array
  - åŸå‹é“¾å¯èƒ½è¢«ç¨‹åºä¿®æ”¹
    ```js
    const arr = [];
    arr.__proto__ = {};
    arr instanceof Array; // false
    ```
  - æ— æ³•æ£€æµ‹ iframes
    ```js
    const arr = new window.frames.Array(1, 2, 3);
    arr instanceof Array; // false
    ```
  - å¦‚æœç½‘é¡µé‡Œæœ‰å¤šä¸ªæ¡†æ¶ï¼Œåˆ™å¯èƒ½æ¶‰åŠä¸¤ ä¸ªä¸åŒçš„å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡
    - å› æ­¤å°±ä¼šæœ‰ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„ Array æ„é€ å‡½æ•°
    - å¦‚æœè¦æŠŠæ•°ç»„ä»ä¸€ä¸ªæ¡†æ¶ä¼  ç»™å¦ä¸€ä¸ªæ¡†æ¶ï¼Œåˆ™è¿™ä¸ªæ•°ç»„çš„æ„é€ å‡½æ•°å°†æœ‰åˆ«äºåœ¨ç¬¬äºŒä¸ªæ¡†æ¶å†…æœ¬åœ°åˆ›å»ºçš„æ•°ç»„
- 3. Array.isArray(arr)
  - å‡å¦‚ä¸å­˜åœ¨ Array.isArray(), å¯åœ¨å…¶å®ƒä»£ç è¿è¡Œå‰ Polyfill
    ```js
    if (! Array.isArray) {
      Array.isArray = function (arg) {
        return Object.prototype.toString.call(arg) === '[object Array]'
      }
    }
    ```

### Function & Object é¸¡è›‹é—®é¢˜(Function.__proto__ === Function.prototype)
```js
// æŒ‰å¾€å¸¸ç†è§£ï¼ŒåŸå‹è‚¯å®šæ˜¯ä¸ªå¯¹è±¡
// åŸå› ï¼šæŒ‰ç…§ ECMA-262 è§„èŒƒå®ç° [[Call]]
typeof Function.prototype // function

Object instanceof Function // true
// Object.__proto__ === Function.prototype
// å› ä¸ºï¼šObject ä¸º function

Function instanceof Function // true
// Function.__proto__ === Function.prototype
// å› ä¸ºï¼šObject ä¸º function

Function instanceof Object // true
// Function.__proto__.__proto__ === Object.prototype
// å› ä¸º Function.prototype -> Object.prototype

Object instanceof Object // true
// Object.__proto__.__proto__ === Object.prototype
// å› ä¸º Function.prototype -> Object.prototype
```
- å¯¹äº `Function.__proto__ === Function.prototype` çš„2ç§è§£é‡Š
  - 1. function Function æ˜¯ Function çš„å®ä¾‹
    - å› æ­¤ a instanceof b ä¸º true
  - 2. function Function ä¸æ˜¯ Function çš„å®ä¾‹
    - Function æ˜¯ built-in çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸å­˜åœ¨ "Function å¯¹è±¡æ˜¯ç”± Function æ„é€ å‡½æ•°åˆ›å»º" è¿™æ ·é¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„é—®é¢˜
    - å³ç°æœ‰ Function.prototypeï¼Œç„¶åæœ‰çš„ function Function()
    - æŠŠ Function.__proto__ æŒ‡å‘ Function.prototype æ˜¯ä¸ºäº†ä¿è¯åŸå‹é“¾çš„å®Œæ•´ï¼Œè®© Function å¯ä»¥è·å–å®šä¹‰åœ¨ Object.prototype ä¸Šçš„æ–¹æ³•

### ç»§æ‰¿æ–¹å¼1 - åŸå‹é“¾ç»§æ‰¿ğŸ”¥
- é—®é¢˜ï¼šå­å®ä¾‹bçš„å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½åœ¨çˆ¶ç±»Açš„åŸå‹ä¸Šäº†
```js
function A() {
  this.color = ['a', 'b', 'c']; // å®ä¾‹å±æ€§
  this.addColor = (color) => this.color.push(color); // å®ä¾‹æ–¹æ³•
}
A.prototype.getColor = () => this.color; // åŸå‹æ–¹æ³•
function B() {
  this.age = [1, 2, 3]; // å®ä¾‹å±æ€§
  this.addAge = (age) => this.age.push(age); // å®ä¾‹æ–¹æ³•
}

const a = new A();

B.prototype = a;
B.prototype.constructor = B;
// ä»¥ä¸Šç­‰ä»·äºï¼Œä½†æ­¤å¤„æ²¡é‡‡ç”¨ï¼š
// const a = Object.create(A.prototype);
// A.apply(a, []);

B.prototype.getAge = () => this.age; // åŸå‹æ–¹æ³•

const b = new B();
console.log(b);
// addAge
// age
// __proto__             ... B.prototype
//  addColor
//  color
//  constructor: Æ’ B()
//  getAge
//  __proto__:           ... A.prototype
//    getColor
//    constructor: Æ’ A()
//    __proto__          ... Object.prototype
```
- å®šä¹‰ï¼šæœ¬è´¨æ˜¯é‡å†™åŸå‹å¯¹è±¡ï¼Œä»£ä¹‹ä»¥ä¸€ä¸ªæ–°ç±»å‹çš„å®ä¾‹
- ç¤ºä¾‹ï¼šBçš„åŸå‹å¯¹è±¡ä¸ä»…æœ‰äº† A æ„é€ å‡½æ•°çš„å…¨éƒ¨å±æ€§å’Œæ–¹æ³•ï¼Œè¿˜æŒ‡å‘äº† A çš„åŸå‹ï¼Œç»§æ‰¿äº† A åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•
- åŸå‹é“¾ç»§æ‰¿æ–¹æ¡ˆçš„ç‰¹ç‚¹:
  - å¤šä¸ªå®ä¾‹å¯¹ b.__proto__ ä¸Šå¼•ç”¨ç±»å‹ çš„æ“ä½œä¼šç¯¡æ”¹ï¼Œå¯¹äºåŸºç¡€ç±»å‹ ä¼šåœ¨è‡ªèº«å»ºç«‹å±æ€§
    - åŸå‹åŒ…å«å¼•ç”¨å€¼çš„æ—¶å€™,push()æ“ä½œå¼•ç”¨å€¼,ä¼šå½±å“åˆ°å…¶å®ƒå®ä¾‹(éå¼•ç”¨å€¼ä¸ä¼š,å› ä¸ºä¿®æ”¹å°±ä¼šåœ¨å®ä¾‹ä¸Šæ–°å¢å±æ€§)
  - ç»™å­ç±»å‹åŸå‹æ·»åŠ å±æ€§å’Œæ–¹æ³• å¿…é¡»åœ¨æ›¿æ¢åŸå‹ä¹‹åï¼Œå› ä¸ºå­ç±»å‹çš„åŸå‹ä¼šè¢«aè¦†ç›–
  - å±æ€§é®è”½ï¼Œå­ç±»å‹åŸå‹ä¸Šä¸çˆ¶ç±»å‹çš„åŒåï¼Œå¯ä»¥é€šè¿‡ b.__proto__.getColor è®¿é—®åˆ°

### ç»§æ‰¿æ–¹å¼2 - ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿(ä¹Ÿç§° å¯¹è±¡ä¼ªè£…ã€ç»å…¸ç»§æ‰¿) - æ€è·¯ğŸ”¥
- é—®é¢˜ï¼šçˆ¶ç±»Açš„åŸå‹æ— æ³•è¢«ç»§æ‰¿
```js
function A() {
  this.p1 = ['a', 'b', 'c'];
}
function B() {
  A.call(this); // æˆ– A.apply(this);
  this.p2 = 123;
}
const b = new B();
console.log(b);
// p1
// p2
// __proto__     ...Object.prototype
```
- ä¸ºäº†è§£å†³åŸå‹åŒ…å«å¼•ç”¨å€¼å¯¼è‡´çš„ç»§æ‰¿é—®é¢˜,ä¸€ç§å«åš "ç›—ç”¨æ„é€ å‡½æ•°" çš„æŠ€æœ¯æµè¡Œèµ·æ¥
- åŸºæœ¬æ€è·¯ï¼šåœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
- è°ƒç”¨æ„é€ å‡½æ•°ç»§æ‰¿æ–¹æ¡ˆçš„ç‰¹ç‚¹:
  - ä¼˜ç‚¹:ç›¸æ¯”äºåŸå‹é“¾,å¯ä»¥åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚
  - é—®é¢˜:çˆ¶ç±»çš„åŸå‹æ–¹æ³•,å­ç±»å®ä¾‹æ— æ³•è®¿é—®

### ç»§æ‰¿æ–¹å¼3 - ç»„åˆç»§æ‰¿(ä¹Ÿç§° ä¼ªç»å…¸ç»§æ‰¿)(å±æ€§å’Œæ–¹æ³•çˆ¶ç±»å’Œå­ç±»ä¸Šéƒ½æœ‰)ğŸ”¥
- é—®é¢˜ï¼šæ¯æ¬¡å®ä¾‹åŒ–å­ç±»Bçš„æ—¶å€™ï¼Œè¿˜éœ€è¦å®ä¾‹åŒ–ä¸€æ¬¡çˆ¶ç±»A
```js
function A() {
  this.color = ['a', 'b', 'c']; // å®ä¾‹å±æ€§
  this.addColor = (color) => this.color.push(color); // å®ä¾‹æ–¹æ³•
}
A.prototype.getColor = function() { return this.color; }; // åŸå‹æ–¹æ³•
function B() {
  A.apply(this); // <--- æ”¹åŠ¨çš„åœ°æ–¹ ---->
  this.age = [1, 2, 3]; // å®ä¾‹å±æ€§
  this.addAge = (age) => this.age.push(age); // å®ä¾‹æ–¹æ³•
}

const a = new A();
// ä»¥ä¸Šç­‰ä»·äºï¼š
// const a = Object.create(A.prototype);
// A.apply(a, []);

B.prototype = a; // ç¼ºç‚¹ï¼šæ¯æ¬¡æˆ‘ä»¬å®ä¾‹åŒ–å­ç±»çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆï¼Œå¦‚æœçˆ¶ç±»æ„é€ å‡½æ•°æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆé•¿çš„å‡½æ•°ï¼Œé‚£ä¹ˆæ¯æ¬¡å®ä¾‹åŒ–å­ç±»å°±ä¼šæ‰§è¡Œå¾ˆé•¿æ—¶é—´
B.prototype.constructor = B;
B.prototype.getAge = function() { return this.age; }; // åŸå‹æ–¹æ³•

// ç»„åˆç»§æ‰¿åçš„åŸå‹é“¾
// __proto__         ... B.prototype
//   constructor: B()
//   getAge
//   __proto__       ... A.prototype
//     constructor: A()
//     getColor
//     __proto__     ... Object.prototype

const b = new B();
b.addColor('d');
console.log(b);
// addAge
// addColor
// age: [1, 2, 3]
// color: ["a", "b", "c", "d"]
// __proto__: A                   ... B.prototype
//   addColor:
//   color: ["a", "b", "c"]
//   constructor: Æ’ B()
//   getAge:
//   __proto__:                    ... A.prototype
//      getColor:
//      constructor:
//      __proto__:            ... Object.prototype
```
- ç»„åˆç»§æ‰¿ç»¼åˆäº†åŸå‹é“¾å’Œç›—ç”¨æ„é€ å‡½æ•°,å°†ä¸¤è€…çš„ä¼˜ç‚¹é›†ä¸­èµ·æ¥
- åŸºæœ¬æ€è·¯: ä½¿ç”¨åŸå‹é“¾ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•,é€šè¿‡ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§
- è¿™æ ·å³å¯ä»¥æŠŠæ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šä»¥å®ç°é‡ç”¨,åˆå¯ä»¥è®©æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§
- ç»„åˆç»§æ‰¿æ‹Ÿè¡¥äº†åŸå‹é“¾å’Œç›—ç”¨æ„é€ å‡½æ•°çš„ä¸è¶³,æ˜¯ JS ä¸­ä½¿ç”¨æœ€å¤šçš„ç»§æ‰¿æ¨¡å¼
- ç»„åˆç»§æ‰¿ä¹Ÿä¿ç•™äº† instanceof / isPrototypeOf èƒ½åŠ›

### ç»§æ‰¿æ–¹å¼4 - å¯„ç”Ÿå¼ç»§æ‰¿ - æ€è·¯
```js
function A() {
  this.colors = ['a', 'b'];
  this.setColor = (color) => this.colors.push(color);
}
A.prototype.getColor = function() { return this.colors; };

function getObj() {
  let a = new A();
  a.age = [1, 2];
  a.setAge = (age) => this.age.push(age);
  return a;
}
console.log(getObj());
// age: [1, 2]
// colors: ["a", "b", "dd"]
// setAge:
// setColor:
// __proto__:                ... A.prototype
//   getColor:
//   constructor:
//   __proto__: Object       ... Object.prototype
```
- ä¸åŸå‹å¼ç»§æ‰¿æ¯”è¾ƒæ¥è¿‘çš„ä¸€ç§ç»§æ‰¿æ–¹å¼
- æ€è·¯ç±»ä¼¼äºå¯„ç”Ÿæ„é€ å‡½æ•°ä¸å·¥å‚æ¨¡å¼: åˆ›å»ºä¸€ä¸ªå®ç°ç»§æ‰¿çš„å‡½æ•°, ä»¥æŸç§æ–¹å¼å¢å¼ºå¯¹è±¡, ç„¶åè¿”å›å¯¹è±¡
- é€šè¿‡å¯„ç”Ÿå¼ç»§æ‰¿ç»™å¯¹è±¡æ·»åŠ å‡½æ•°ä¼šå¯¼è‡´å‡½æ•°éš¾ä»¥é‡å¤ä½¿ç”¨,ä¸æ„é€ å‡½æ•°æ¨¡å¼ç±»ä¼¼

### ç»§æ‰¿æ–¹å¼5 - å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿(æœ€ä½³æ¨¡å¼)(es6 class è¯­æ³•çš„å®ç°åŸç†)ğŸ”¥
```js
function A() {
  this.color = ['a', 'b', 'c']; // å®ä¾‹å±æ€§
  this.addColor = (color) => this.color.push(color); // å®ä¾‹æ–¹æ³•
}
A.prototype.getColor = function() { return this.color; }; // åŸå‹æ–¹æ³•
function B() {
  A.apply(this);
  this.age = [1, 2, 3]; // å®ä¾‹å±æ€§
  this.addAge = (age) => this.age.push(age); // å®ä¾‹æ–¹æ³•
}

// å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿(ç”¨è¿™ä¸ªä»£æ›¿åŸå‹é“¾ç»§æ‰¿çš„new)
B.prototype = Object.create(A.prototype);
B.prototype.constructor = B;

// å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿åçš„åŸå‹é“¾
// __proto__         ... B.prototype
//   constructor: A()
//   getAge
//   __proto__       ... A.prototype
//     constructor: A()
//     getColor
//     __proto__     ... Object.prototype


B.prototype.getAge = function() { return this.age; }; // åŸå‹æ–¹æ³•

const b = new B();
b.addColor('d');
console.log(b);
// addAge
// addColor
// age: [1, 2, 3]
// color: ["a", "b", "c", "d"]
// __proto__: A                   ... B.prototype
//   constructor: Æ’ A()
//   getAge:
//   __proto__:                    ... A.prototype
//     getColor:
//     constructor: Æ’ A()
//      __proto__:            ... Object.prototype
```
- ç»„åˆç»§æ‰¿å­˜åœ¨æ•ˆç‡é—®é¢˜,æœ€ä¸»è¦çš„æ•ˆç‡é—®é¢˜æ˜¯çˆ¶ç±»æ„é€ å‡½æ•°å§‹ç»ˆä¼šè¢«è°ƒç”¨ä¸¤æ¬¡
  - ä¸€æ¬¡æ˜¯åœ¨åˆ›å»ºå­ç±»åŸå‹æ—¶è°ƒç”¨,å¦ä¸€æ¬¡æ˜¯åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨
- å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿åªè°ƒç”¨äº†ä¸€æ¬¡ A æ„é€ å‡½æ•°,é¿å…äº† A.prototype ä¸Šä¸å¿…è¦çš„ä¹Ÿç”¨ä¸åˆ°çš„å±æ€§, æ•ˆç‡æ›´é«˜
  - åŸå‹é“¾ä»ç„¶ä¿æŒä¸å˜,å› æ­¤ instanceof å’Œ isPrototypeOf æ­£å¸¸æœ‰æ•ˆ
  - å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿å¯ä»¥ç®—æ˜¯å¼•ç”¨ç±»å‹ç»§æ‰¿çš„æœ€ä½³æ¨¡å¼
